<!DOCTYPE html>
<html lang="de"><head>
  <meta charset="UTF-8"><title>Registrieren</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>body{font-family:sans-serif;padding:2rem;background:#f9f9f9}</style>
</head><body>
<h1>Registrieren</h1>

<form onsubmit="register(); return false;">
  <input id="name" type="text" placeholder="Name" required />
  <input id="email" type="email" placeholder="E-Mail" required />
  <input id="telefon" type="tel" placeholder="Telefon" required />
  <input id="password" type="password" placeholder="Passwort" required />
  <button type="submit">Registrieren</button>
</form>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.35.6/dist/umd/supabase.min.js"></script>
<script>
  const supabase = window.supabase.createClient(
    'https://sosiczexxefsrqwzlruf.supabase.co',
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNvc2ljemV4eGVmc3Jxd3pscnVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyOTk0NjUsImV4cCI6MjA2Mjg3NTQ2NX0.ybmly8tbxB_rrS-sOzkHoYgCnTa2hzKuYN1BYc3MaYc'
  );
</script>

<script>
async function register() {
  const { user, error } = await supabase.auth.signUp({ email: email.value, password: password.value });
  if (error) return alert(error.message);
  await supabase.from("kunden").insert([{ id: user.id, name: name.value, email: email.value, telefon: telefon.value }]);
  alert("Registrierung erfolgreich!");
  window.location.href = 'login.html';
}
</script>
</body></html>